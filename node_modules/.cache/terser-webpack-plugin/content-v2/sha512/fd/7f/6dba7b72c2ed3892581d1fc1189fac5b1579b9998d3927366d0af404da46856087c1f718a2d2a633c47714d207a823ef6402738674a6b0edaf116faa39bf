{"code":"(this[\"webpackJsonpf1-chatbot\"]=this[\"webpackJsonpf1-chatbot\"]||[]).push([[0],{115:function(t,e){},117:function(t,e){},135:function(t,e,n){\"use strict\";n.r(e);var a,r=n(73),c=n.n(r),i=(n(13),n(46)),s=n.n(i),o=(n(86),{initialMessages:[Object(i.createChatBotMessage)(\"Bienvenidos\",{customComponents:{}})]}),u=n(6),l=n(8),h=n(74),b=function(){function t(e){Object(u.a)(this,t),this.actionProvider=e}return Object(l.a)(t,[{key:\"parse\",value:function(t){var e=this,n=t.toLowerCase();new h.Wit({accessToken:\"NO45XJ7CQV5XHOD6LDF5TQ7WNISL6LR5\"}).message(n,{}).then((function(t){var n=t;e.actionProvider.greet(n)})).catch((function(t){return e.actionProvider.greet(\"vacio\")}))}}]),t}(),v=n(25),f=n(59),j=n(39),O=n.n(j),p=n(75),d=n(56),g=n(18),y=n(47),x=n(51),m=n(52),k=n(144),w=function(t){Object(y.a)(n,t);var e=Object(x.a)(n);function n(){var t;return Object(u.a)(this,n),t=e.call(this),Error.captureStackTrace(Object(g.a)(t),t.constructor),t}return n}(Object(m.a)(Error)),C=function(){function t(e,n,a){Object(u.a)(this,t),this.createChatbotMessage=e,this.setState=n,this.createClientMessage=a}return Object(l.a)(t,[{key:\"searchNlusByName\",value:function(){var t=Object(d.a)(O.a.mark((function t(e,n,r,c){var i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=E.query({query:Object(k.a)(a||(a=Object(p.a)([\"\\n          query Nlus($intent: String!, $entity: String!, $role: String, $trait: String!) {\\n            nlus(intent: $intent, entity: $entity, role: $role, trait: $trait) {\\n              intent {\\n                text\\n              }\\n              entity {\\n                text\\n              }\\n              role {\\n                text\\n              }\\n              trait {\\n                text\\n              }\\n            }\\n          }\\n        \"]))),variables:{intent:e,entity:n,role:r,trait:c}}).then((function(t){t.loading,t.error;return t.data})),t.abrupt(\"return\",i);case 2:case\"end\":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}()},{key:\"greet\",value:function(){var t=Object(d.a)(O.a.mark((function t(e){var n,a,r,c,i,s,o,u,l,h,b,v,f,j;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.intents[0].name,a=e.intents[0].confidence,r=Object.values(Object.values(e.entities)[0])[0].name,c=Object.values(Object.values(e.entities)[0])[0].role,i=Object.values(Object.values(e.entities)[0])[0].confidence,s=Object.values(Object.values(e.traits)[0])[0].value,o=Object.values(Object.values(e.traits)[0])[0].confidence,u=\"\",l=\"\",h=\"\",b=\"\",!(a<.7||i<.7||o<.7)){t.next=14;break}throw new w;case 14:return v=null,c!==r&&(v=c),t.next=18,this.searchNlusByName(n,r,v,s).then((function(t){var e=t.nlus;u=e.intent.text,l=e.entity.text,e.role&&(h=e.role.text),b=e.trait.text}));case 18:f=u+\" - \"+l+\" - \"+h+\" - \"+b,j=this.createChatbotMessage(f),this.updateChatbotState(j),t.next=27;break;case 23:t.prev=23,t.t0=t.catch(0),console.log(t.t0),this.updateChatbotState(this.createChatbotMessage(\"No entiendo tu pregunta\"));case 27:case\"end\":return t.stop()}}),t,this,[[0,23]])})));return function(e){return t.apply(this,arguments)}}()},{key:\"updateChatbotState\",value:function(t){this.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{messages:[].concat(Object(v.a)(e.messages),[t])})}))}}]),t}(),S=C,N=n(32);var $=function(){return Object(N.jsx)(\"div\",{className:\"App\",children:Object(N.jsx)(s.a,{config:o,messageParser:b,actionProvider:S})})},M=n(143),B=n(145),P=n(147),L=new M.a({uri:\"https://aplochatf1.herokuapp.com/\",cache:new B.a}),q=document.getElementById(\"root\");c.a.render(Object(N.jsx)(P.a,{client:L,children:Object(N.jsx)($,{})}),q);var E=e.default=L}},[[135,1,2]]]);","name":"static/js/main.356ddd58.chunk.js","map":{"version":3,"sources":["static/js/main.356ddd58.chunk.js"],"names":["this","push","module","exports","__webpack_exports__","__webpack_require__","r","_templateObject","react_dom","react_dom_default","n","build","build_default","src_config","initialMessages","Object","customComponents","classCallCheck","createClass","node_wit","src_MessageParser","MessageParser","actionProvider","key","value","message","_this","mensaje","toLowerCase","accessToken","then","data","respuesta","greet","catch","err","toConsumableArray","objectSpread2","regenerator","regenerator_default","taggedTemplateLiteral","asyncToGenerator","assertThisInitialized","inherits","createSuper","wrapNativeSuper","lib","ActionProvider_ErrorLowConfidence","_Error","ErrorLowConfidence","_super","call","Error","captureStackTrace","constructor","ActionProvider_ActionProvider","ActionProvider","createChatbotMessage","setStateFunc","createClientMessage","setState","_searchNlusByName","a","mark","_callee","intent","entity","role","trait","wrap","_context","prev","next","src","query","variables","_ref","loading","error","abrupt","stop","_x","_x2","_x3","_x4","apply","arguments","_greet","_callee2","conf_intent","ent","ent_rol","conf_ent","trai","conf_trai","text_intent","text_entity","text_role","text_trait","greetingMessage","_context2","intents","name","confidence","values","entities","traits","searchNlusByName","response","nlus","text","updateChatbotState","t0","console","log","_x5","prevState","messages","concat","src_ActionProvider","jsx_runtime","chatbot","className","children","config","messageParser","ApolloClient","inMemoryCache","ApolloProvider","src_client","uri","cache","rootElement","document","getElementById","render","client"],"mappings":"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"},"input":"(this[\"webpackJsonpf1-chatbot\"] = this[\"webpackJsonpf1-chatbot\"] || []).push([[0],{\n\n/***/ 115:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 117:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 135:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(73);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(13);\n\n// EXTERNAL MODULE: ./node_modules/react-chatbot-kit/build/index.js\nvar build = __webpack_require__(46);\nvar build_default = /*#__PURE__*/__webpack_require__.n(build);\n\n// EXTERNAL MODULE: ./node_modules/react-chatbot-kit/build/main.css\nvar main = __webpack_require__(86);\n\n// CONCATENATED MODULE: ./src/config.js\n// in config.js\n// Config starter code\nvar config={initialMessages:[Object(build[\"createChatBotMessage\"])(\"Bienvenidos\",{customComponents:{}})]};/* harmony default export */ var src_config = (config);\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(8);\n\n// EXTERNAL MODULE: ./node_modules/node-wit/index.js\nvar node_wit = __webpack_require__(74);\n\n// CONCATENATED MODULE: ./src/MessageParser.js\n//here call Wit.ai\nvar MessageParser_MessageParser=/*#__PURE__*/function(){function MessageParser(actionProvider){Object(classCallCheck[\"a\" /* default */])(this,MessageParser);this.actionProvider=actionProvider;}Object(createClass[\"a\" /* default */])(MessageParser,[{key:\"parse\",value:function parse(message){var _this=this;var lowerCaseMessage=message.toLowerCase();var client=new node_wit[\"Wit\"]({accessToken:\"NO45XJ7CQV5XHOD6LDF5TQ7WNISL6LR5\"});var mensaje=lowerCaseMessage;client.message(mensaje,{}).then(function(data){var respuesta=data;_this.actionProvider.greet(respuesta);}).catch(function(err){return _this.actionProvider.greet(\"vacio\");});}}]);return MessageParser;}();/* harmony default export */ var src_MessageParser = (MessageParser_MessageParser);\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js + 1 modules\nvar objectSpread2 = __webpack_require__(59);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(39);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\nvar taggedTemplateLiteral = __webpack_require__(75);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(56);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\nvar assertThisInitialized = __webpack_require__(18);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\nvar inherits = __webpack_require__(47);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 2 modules\nvar createSuper = __webpack_require__(51);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js + 2 modules\nvar wrapNativeSuper = __webpack_require__(52);\n\n// EXTERNAL MODULE: ./node_modules/graphql-tag/lib/index.js + 11 modules\nvar lib = __webpack_require__(144);\n\n// CONCATENATED MODULE: ./src/ActionProvider.js\nvar _templateObject;var ActionProvider_ErrorLowConfidence=/*#__PURE__*/function(_Error){Object(inherits[\"a\" /* default */])(ErrorLowConfidence,_Error);var _super=Object(createSuper[\"a\" /* default */])(ErrorLowConfidence);function ErrorLowConfidence(){var _this;Object(classCallCheck[\"a\" /* default */])(this,ErrorLowConfidence);_this=_super.call(this);Error.captureStackTrace(Object(assertThisInitialized[\"a\" /* default */])(_this),_this.constructor);return _this;}return ErrorLowConfidence;}(/*#__PURE__*/Object(wrapNativeSuper[\"a\" /* default */])(Error));// ActionProvider starter code\nvar ActionProvider_ActionProvider=/*#__PURE__*/function(){function ActionProvider(createChatbotMessage,setStateFunc,createClientMessage){Object(classCallCheck[\"a\" /* default */])(this,ActionProvider);this.createChatbotMessage=createChatbotMessage;this.setState=setStateFunc;this.createClientMessage=createClientMessage;}Object(createClass[\"a\" /* default */])(ActionProvider,[{key:\"searchNlusByName\",value:function(){var _searchNlusByName=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(intent,entity,role,trait){var data;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=src.query({query:Object(lib[\"a\" /* gql */])(_templateObject||(_templateObject=Object(taggedTemplateLiteral[\"a\" /* default */])([\"\\n          query Nlus($intent: String!, $entity: String!, $role: String, $trait: String!) {\\n            nlus(intent: $intent, entity: $entity, role: $role, trait: $trait) {\\n              intent {\\n                text\\n              }\\n              entity {\\n                text\\n              }\\n              role {\\n                text\\n              }\\n              trait {\\n                text\\n              }\\n            }\\n          }\\n        \"]))),variables:{intent:intent,entity:entity,role:role,trait:trait}}).then(function(_ref){var loading=_ref.loading,error=_ref.error,data=_ref.data;return data;});return _context.abrupt(\"return\",data);case 2:case\"end\":return _context.stop();}}},_callee);}));function searchNlusByName(_x,_x2,_x3,_x4){return _searchNlusByName.apply(this,arguments);}return searchNlusByName;}()},{key:\"greet\",value:function(){var _greet=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(respuesta){var intent,conf_intent,ent,ent_rol,conf_ent,trai,conf_trai,text_intent,text_entity,text_role,text_trait,role,mensaje,greetingMessage;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;intent=respuesta.intents[0].name;conf_intent=respuesta.intents[0].confidence;ent=Object.values(Object.values(respuesta.entities)[0])[0].name;ent_rol=Object.values(Object.values(respuesta.entities)[0])[0].role;conf_ent=Object.values(Object.values(respuesta.entities)[0])[0].confidence;trai=Object.values(Object.values(respuesta.traits)[0])[0].value;conf_trai=Object.values(Object.values(respuesta.traits)[0])[0].confidence;text_intent=\"\";text_entity=\"\";text_role=\"\";text_trait=\"\";if(!(conf_intent<0.7||conf_ent<0.7||conf_trai<0.7)){_context2.next=14;break;}throw new ActionProvider_ErrorLowConfidence();case 14:role=null;if(ent_rol!==ent){role=ent_rol;}_context2.next=18;return this.searchNlusByName(intent,ent,role,trai).then(function(data){var response=data.nlus;text_intent=response.intent.text;text_entity=response.entity.text;if(response.role){text_role=response.role.text;}text_trait=response.trait.text;});case 18:// mensaje = a+b+c+d\nmensaje=text_intent+\" - \"+text_entity+\" - \"+text_role+\" - \"+text_trait;greetingMessage=this.createChatbotMessage(mensaje);this.updateChatbotState(greetingMessage);_context2.next=27;break;case 23:_context2.prev=23;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);this.updateChatbotState(this.createChatbotMessage(\"No entiendo tu pregunta\"));case 27:case\"end\":return _context2.stop();}}},_callee2,this,[[0,23]]);}));function greet(_x5){return _greet.apply(this,arguments);}return greet;}()//fin funcion\n},{key:\"updateChatbotState\",value:function updateChatbotState(message){// NOTE: This function is set in the constructor, and is passed in\n// from the top level Chatbot component. The setState function here\n// actually manipulates the top level state of the Chatbot, so it's\n// important that we make sure that we preserve the previous state.\nthis.setState(function(prevState){return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},prevState),{},{messages:[].concat(Object(toConsumableArray[\"a\" /* default */])(prevState.messages),[message])});});}}]);return ActionProvider;}();/* harmony default export */ var src_ActionProvider = (ActionProvider_ActionProvider);\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(32);\n\n// CONCATENATED MODULE: ./src/components/chatbot.js\nfunction App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(build_default.a,{config:src_config,messageParser:src_MessageParser,actionProvider:src_ActionProvider})});}/* harmony default export */ var chatbot = (App);\n// EXTERNAL MODULE: ./node_modules/@apollo/client/core/ApolloClient.js + 31 modules\nvar ApolloClient = __webpack_require__(143);\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/cache/inmemory/inMemoryCache.js + 10 modules\nvar inMemoryCache = __webpack_require__(145);\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/react/context/ApolloProvider.js + 1 modules\nvar ApolloProvider = __webpack_require__(147);\n\n// CONCATENATED MODULE: ./src/index.js\nvar src_client=new ApolloClient[\"a\" /* ApolloClient */]({uri:'https://aplochatf1.herokuapp.com/',cache:new inMemoryCache[\"a\" /* InMemoryCache */]()});var rootElement=document.getElementById(\"root\");react_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ApolloProvider[\"a\" /* ApolloProvider */],{client:src_client,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(chatbot,{})}),rootElement);/* harmony default export */ var src = __webpack_exports__[\"default\"] = (src_client);\n\n/***/ })\n\n},[[135,1,2]]]);","inputSourceMap":{"version":3,"sources":["ignored C:\\Users\\Usuario\\Documents\\chatbot_fisica\\node_modules\\readable-stream\\lib util","ignored C:\\Users\\Usuario\\Documents\\chatbot_fisica\\node_modules\\readable-stream\\lib\\internal\\streams util","C:/Users/Usuario/Documents/chatbot_fisica/src/config.js","C:/Users/Usuario/Documents/chatbot_fisica/src/MessageParser.js","C:/Users/Usuario/Documents/chatbot_fisica/src/ActionProvider.js","C:/Users/Usuario/Documents/chatbot_fisica/src/components/chatbot.js","C:/Users/Usuario/Documents/chatbot_fisica/src/index.js"],"names":["config","initialMessages","createChatBotMessage","customComponents","MessageParser","actionProvider","message","lowerCaseMessage","toLowerCase","client","Wit","accessToken","mensaje","then","data","respuesta","greet","catch","err","ErrorLowConfidence","Error","captureStackTrace","constructor","ActionProvider","createChatbotMessage","setStateFunc","createClientMessage","setState","intent","entity","role","trait","query","gql","variables","loading","error","intents","name","conf_intent","confidence","ent","Object","values","entities","ent_rol","conf_ent","trai","traits","value","conf_trai","text_intent","text_entity","text_role","text_trait","searchNlusByName","response","nlus","text","greetingMessage","updateChatbotState","console","log","prevState","messages","App","ApolloClient","uri","cache","InMemoryCache","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"x","sourcesContent":["/* (ignored) */","/* (ignored) */","// in config.js\r\n// Config starter code\r\nimport { createChatBotMessage } from \"react-chatbot-kit\";\r\n\r\nconst config = {\r\n  initialMessages: [\r\n    createChatBotMessage(\"Bienvenidos\", {\r\n      customComponents: {}\r\n    })\r\n  ]\r\n};\r\n\r\nexport default config;\r\n","//here call Wit.ai\r\nimport { Wit } from \"node-wit\";\r\n\r\nclass MessageParser {\r\n  constructor(actionProvider) {\r\n    this.actionProvider = actionProvider;\r\n  }\r\n\r\n  parse(message) {\r\n    const lowerCaseMessage = message.toLowerCase();\r\n    const client = new Wit({ accessToken: \"NO45XJ7CQV5XHOD6LDF5TQ7WNISL6LR5\" });\r\n    var mensaje = lowerCaseMessage;\r\n    client\r\n      .message(mensaje, {})\r\n      .then((data) => {\r\n        var respuesta = data;\r\n        this.actionProvider.greet(respuesta);\r\n      })\r\n      .catch((err) => this.actionProvider.greet(\"vacio\"));\r\n  }\r\n}\r\n\r\nexport default MessageParser;\r\n","import { gql } from \"@apollo/client\";\r\nimport client from \"./index\";\r\n\r\nclass ErrorLowConfidence extends Error {\r\n  constructor() {\r\n    super();\r\n    Error.captureStackTrace(this, this.constructor);\r\n  }\r\n}\r\n\r\n// ActionProvider starter code\r\nclass ActionProvider {\r\n  \r\n  constructor(createChatbotMessage, setStateFunc, createClientMessage) {\r\n    this.createChatbotMessage = createChatbotMessage;\r\n    this.setState = setStateFunc;\r\n    this.createClientMessage = createClientMessage;\r\n  }\r\n\r\n  async searchNlusByName(intent, entity, role, trait) {\r\n    let data = client\r\n      .query({\r\n        query: gql`\r\n          query Nlus($intent: String!, $entity: String!, $role: String, $trait: String!) {\r\n            nlus(intent: $intent, entity: $entity, role: $role, trait: $trait) {\r\n              intent {\r\n                text\r\n              }\r\n              entity {\r\n                text\r\n              }\r\n              role {\r\n                text\r\n              }\r\n              trait {\r\n                text\r\n              }\r\n            }\r\n          }\r\n        `,\r\n        variables: { intent: intent, entity: entity, role: role, trait: trait }\r\n      })\r\n      .then(({ loading, error, data }) => { return data });\r\n\r\n    return data;\r\n\r\n  }\r\n\r\n  async greet(respuesta) {\r\n    try {\r\n      const intent = respuesta.intents[0].name;\r\n      const conf_intent = respuesta.intents[0].confidence;\r\n      const ent = Object.values(Object.values(respuesta.entities)[0])[0].name;\r\n      const ent_rol = Object.values(Object.values(respuesta.entities)[0])[0].role;\r\n      const conf_ent = Object.values(Object.values(respuesta.entities)[0])[0].confidence;\r\n      const trai = Object.values(Object.values(respuesta.traits)[0])[0].value;\r\n      const conf_trai = Object.values(Object.values(respuesta.traits)[0])[0].confidence;\r\n\r\n      let text_intent = \"\";\r\n      let text_entity = \"\";\r\n      let text_role = \"\";\r\n      let text_trait = \"\";\r\n\r\n      if (conf_intent < 0.7 || conf_ent < 0.7 || conf_trai < 0.7) {\r\n        throw new ErrorLowConfidence();\r\n      }\r\n\r\n      let role = null\r\n      if (ent_rol !== ent) {\r\n        role = ent_rol\r\n      }\r\n      await this.searchNlusByName(intent, ent, role, trai).then((data) => {\r\n        let response = data.nlus\r\n        text_intent = response.intent.text;\r\n        text_entity = response.entity.text;\r\n        if (response.role){\r\n          text_role = response.role.text;\r\n        }\r\n        text_trait = response.trait.text;\r\n      });\r\n\r\n      // mensaje = a+b+c+d\r\n      const mensaje =\r\n        text_intent +\r\n        \" - \" +\r\n        text_entity +\r\n        \" - \" +\r\n        text_role +\r\n        \" - \" +\r\n        text_trait;\r\n\r\n      const greetingMessage = this.createChatbotMessage(mensaje);\r\n      this.updateChatbotState(greetingMessage);\r\n    } catch (e) {\r\n      console.log(e);\r\n      this.updateChatbotState(\r\n        this.createChatbotMessage(\"No entiendo tu pregunta\")\r\n      );\r\n    }\r\n  } //fin funcion\r\n\r\n  updateChatbotState(message) {\r\n    // NOTE: This function is set in the constructor, and is passed in\r\n    // from the top level Chatbot component. The setState function here\r\n    // actually manipulates the top level state of the Chatbot, so it's\r\n    // important that we make sure that we preserve the previous state.\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      messages: [...prevState.messages, message]\r\n    }));\r\n  }\r\n}\r\n\r\nexport default ActionProvider;\r\n","import React from \"react\";\r\nimport Chatbot from \"react-chatbot-kit\";\r\nimport \"react-chatbot-kit/build/main.css\";\r\nimport config from \"../config\";\r\nimport MessageParser from \"../MessageParser\";\r\nimport ActionProvider from \"../ActionProvider\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Chatbot\r\n        config={config}\r\n        messageParser={MessageParser}\r\n        actionProvider={ActionProvider}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import ReactDOM from \"react-dom\";\r\nimport App from \"./components/chatbot\";\r\nimport { ApolloProvider, ApolloClient, InMemoryCache, useQuery, gql} from '@apollo/client';\r\n\r\nconst client = new ApolloClient({\r\n  uri: 'https://aplochatf1.herokuapp.com/',\r\n  cache: new InMemoryCache(),\r\n});\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n  <ApolloProvider client={client}>\r\n    <App />\r\n  </ApolloProvider>,\r\n  rootElement\r\n);\r\n\r\nexport default client\r\n"]}}